# 专属OSS对象存储

|
阿里云OSS
华为云OBS
浪潮云OSS
|
支持时间
2022.3月
2023年.6月
2023年.11月
|
参考文档
[阿里云 OSS](https://www.aliyun.com/product/oss?spm=5176.21213303.5694434980.1.7a7553c9RFnxJE&scm=20140722.S_card@@%E4%BA%A7%E5%93%81@@218843.S_card0.ID_card@@%E4%BA%A7%E5%93%81@@218843-RL_oss%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8-OR_ser-V_2-P0_0)
华为OBS对象存储
浪潮云OSS

对象存储支持阿里云OSS、华为云OBS和浪潮云OSS三种。
## 产品配置​

在宜搭的管理后台-平台管理-存储配置 ，可以设置数据库存储、文件存储的配置的信息。

## 文件对象存储​

**对称存储类型**：根据企业需要，选择阿里云OSS、华为云OBS、浪潮云OSS 中的其中一种。
**存储链接地址**：默认为 bucket.endpoint 的结构
**密钥AK**：存储平台颁发的AccessKey。
**密钥SK**：存储平台颁发的SecretKey。
**说明**：

### 专属钉网络代理模式​

专属宜搭可以配合专属钉的网络专线模式，通过企业定制的网络专线代理，可以让oss直连企业私有存储的同时，在网络层也能够实现更加安全的传输。

### 专属环境自检​

对于数据库和OSS对象存储的使用，可在正式使用前进行可用性测试。
## 文件存储OSS检测项​

开始检测（进行中）

检测结果（成功效果）

### 环境要求清单表​

|
**功能项**
**配置内容**
**说明**
|
**OSS 类型**
选择阿里云 OSS、华为云 OBS和浪潮云 OSS。
目前已支持[阿里云 OSS](https://help.aliyun.com/zh/oss/?spm=a2c4g.11186623.0.0.5b4ede53HBHn6O)、华为云 OBS和浪潮云 OSS三个对象存储类型。
|
**网络配置**
OSS开通公网可访问

|
**连通性测试**
通过宜搭专属配置中的测试连接功能验证网络连通性
用于检验网络是否连通。
|
**跨域设置**
需要配置允许企业在宜搭上的域名可跨域，Header设置为 *。
宜搭是直连 OSS 进行文件上传下载，必须允许跨域才能使用。
|
**防盗链检查**
检查是否开启了防盗链，如果开启需要配置宜搭域名白名单。
白名单referer配置为: im.dingtalk.com
宜搭出口 IP 为：106.11.0.0/16203.119.128.0/1759.82.0.0/16140.205.0.0/16
防盗链会禁止非白名单内的请求。

|
**时间服务器检查**
如果企业有时间服务器，需要检查时间是否准确。
OSS请求有时效性，宜搭设置为 30s，超期请求将无效。

## 常见问题：​

## Q: 配置了企业自主的OSS文件对象存储后，附件上传量是否还有数量上限控制？​

A:开启了专属存储的应用产生的附件上传量，将直存于企业专属存储(存储在云上应用使用的附件量总量依然有上限，但上传于专属OSS的将不会平台侧的上限统计)。既保证了企业数据安全，而使用了专属存储的应用附件总量上限将受限于企业oss本身的上限。
## Q：开启专属存储，数据存储在企业自己的阿里云数据库或OSS上，这部分数据，宜搭平台上会有备份吗？​

不会，
业务数据直存企业数据库或OSS空间，宜搭侧不会做存储及备份，需要客户做好数据的安全保存。
## Q：专属OSS配置项支持编辑或删除吗？​

OSS涉及重要业务文件存储功能，目前不支持配置成功运行的OSS介质的切换。请谨慎配置有效的专属OSS，避免频繁切换OSS存储地址配置项带来的数据同步不一致。
## Q：开启了专属OSS，附件上传报错无效网址是怎么回事？​

A: 请检查专属存储域名是否为合法域名，
专属存储oss配置仅支持bucket + 域名的方式，bucket + ip会导致无法上传附件。
## Q：开启了专属OSS，哪些功能会有差异注��事项？​

专属OSS
开启前
开启后
**存储介质**
公有云公共存储服务
可存储至企业要求多云OSS
（阿里云、华为云、浪潮云）
**基础统计能力**
企业基础信息提供统一OSS统计管理

专属OSS相关的应用，由企业自行在专属中运维工具中查看。

**图片组件、附件组件**
云端存储
专属存储 ✅
**word模板附件**
云端存储
非本地存储存储
（依然云端存储）

**酷应用附件、酷卡片附件**
云端存储
非本地存储存储
（依然云端存储）

**酷应用工厂应用**
云端存储
不支持开启专属存储