# 聚合表简介

本章节包含以下内容：聚合表简介创建聚合表关联关系聚合校验

|
能力
免费版
轻享版
专业版
专属版
|
聚合表
不支持
10个/组织
20个/组织
50个/组织
开启了专属存储的应用暂不支持聚合表

## 功能简介​

宜搭聚合表是由多个表单聚合形成的计算表，具有实时计算、实时校验特点，并且支持在应用其他功能模块（表单、报表、门户数据卡片等）使用。

## 使用场景​

聚合表适用于进销存、抢预约、CRM钱包管理、项目成本管理和提成计算、请假天数计算等业务场景。
业务逻辑中涉及：进（eg.入库、充值、假期天数等）、销（eg.出库、消费、请假等）、存（eg.剩余库存、余额、剩余假期天数等）场景的，都适宜用聚合表解决。**进销存场景**
制造业、零售业、建筑行业等所有涉及到实物库存管理的都需要一套库存管理系统去实现对出库、入库、调拨、盘点的全流程管理，实现精准把控企业的库存数据，基于库存数据去合理安排销售计划、采购计划、生产计划。使用聚合表，通过出库入业务表单，计算产品的实时库存，并在出入库业务表单提交、或审批的时候，实时进行校验，如果出库数量大于库存剩余数量，则校验不允许超卖。**CRM钱包管理**
会员账号的钱包余额，
一般由充值和消费记录构成，使用聚合表计算实时余额，然后进行可用消费额度校验，当消费金额大于钱包余额的时候，无法提交消费订单**抢预约场景**
在一些活动购票、餐厅预约、场馆预约及商品抢购的场景中，可能存在因为并发高而导致超卖现象的出现，使用聚合表中，设置校验条件为，预约（购买）次数小于等于 1 即可解决。
## 使用限制​

**聚合表维度**单个聚合表最多可配置 10 个数据源、10 个关联关系、20 个指标。单个数据源（即表单）最多支持配置 10 个过滤条件。单个数据源（即表单）最多可用 10 个字段参与指标计算。**应用维度**开启了专属存储的应用，暂不支持聚合表。
## 注意事项​

**聚合表的筛选和校验：**如果聚合表配置了筛选条件，则提交校验只针对**符合筛选条件的数据**生效，
不符合筛选条件的数据的新增、删除、变更等都不会触发提交校验；**聚合表发布：**聚合表发布以后，如果，聚合表的列标题和指标，在表单或者报表等场域使用后，如果修改及重新发布聚合表（修改或删除关联关系、指标等），可能表单或报表中使用聚合表的地方报错，注意同步修改引用聚合表的搭建配置。**操作数据源表单的几种方式**：通过批量导入、批量更新、批量删除、自动化流、业务规则、Open API等方式对数据源表单数据进行增删改操作时，都会触发聚合表计算结果的更新。在导入记录中通过「删除本批新增数据」删除数据源表单的数据，
不会触发聚合表的校验判断。

通过集成自动化和业务规则，操作数据源表单的数据，
不会触发聚合表的校验判断OpenApi操作数据源表单的数据，是否会触发校验，取决于接口参数配置，参数说明：

**指标中使用隐藏字段**：如果在指标计算中使用了隐藏的数值组件，那么该组件需开启“始终提交”。

**日期组件的精度**：当选择日期组件为匹配条件的时候，注意表单提交的日期精度，
不同精度的日期系统会判断为不同的字段值，例如，2024年9月9号和2024年9月9号0时0分0秒，会判断为不相等的值。

**选项类组件**：如果关联字段使用选项字段，则关联字段按照选项值（非显示值）进行匹配和展示。

**不建议用法**：当某表单已经作为聚合表的数据源时，
不建议再为该表单配置数据更新相关的集成&自动化流，否则极易导致循环更新失败（如表单修改或新增后，更新本条实例）。