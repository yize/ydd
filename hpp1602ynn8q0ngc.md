---
title: 专属数据库
url: https://docs.aliwork.com/docs/yida_support/_15/tymkt6/hpp1602ynn8q0ngc
source: docs.aliwork.com
---

# 专属数据库

宜搭专属版支持将宜搭的业务数据存至客户在阿里云上的指定云数据库中，目前专属宜搭主要兼容PostgresSQL语法类型的数据库。推荐阿里云 RDS PostgresSQL、ADB PostgresSQL![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1681287903064-36161239-1f6e-4dbf-b2cb-ee60e0b57927.png)
![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1681287916919-f763adc1-6abc-497c-85d5-0a69fcb9b929.png)
## 配置步骤[​](#jHk1w)
你可以在宜搭[工作台](https://www.aliwork.com/workPlatform) > **平台管理** > **平台专属定制** > **存储配置**，配置数据库存储信息。![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1656642245037-d203795d-7354-4046-8ef8-1aebad586256.png)
## 业务主数据库[​](#iB6zW)
设置此数据库，宜搭内的业务提交相关数据，将会自动建立相关表及索引信息，让表单、流程等业务数据，都存在此数据库中。该数据库建议是一个全新的数据库，避免非宜搭的系统共用此数据库连接信息，造成数据维护不统一。提供公网可访问的云数据库地址：通常是 域名+端口号数据库名称：对应 database name数据库类型：PostGresSQL，推荐使用阿里云RDS PostGresSQL，如需更改性能可选配 ADB （分析型）PostGresSQL账号：数据库的访问账号密码：数据库的访问密码![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1684911046764-eb020873-c105-40ef-a582-b39755e9577d.png)
## 扩展数据库[​](#ZqsrL)
通过自动化的业务的数据提交类（业务主数据）与数据查询类（扩展数据库）的场景区分，在数据库压力较大时，可提供根据业务场景的数据库分库策略，为业务检索、BI报表等数据搜索场景提供更快速的查询能力。尤其是在Quick互联等大数据量查询场景，客户可根据实际需要，选择行配置![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1705629613232-1d84fab1-b861-4630-8c3e-1de912843d47.png)
## 专属环境自检[​](#Y5NTG)
对于数据库和OSS对象存储的使用，可在正式使用前进行可用性测试。![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1681292115515-9bbaa85d-5e1b-49a2-b623-632b20bf6d92.png)
### 数据库检测项[​](#ztSfh)
| 开始检测 | 检测结果 |
|---|---|
|  |  |
## 按需开通（应用级）：[​](#kKNGl)
### 1、新建应用 可选开启：[​](#TjU8u)
在新建应用时，可选择此应用的业务数据是存在公有云（默认），还是专属的混合云数据库仓库中（核心重要数据）![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1656640766967-ee75bc09-2583-4187-aba6-8030134f5cbe.png)
### 2、历史应用 可手动开启：[​](#bCTSm)
应用管理员可在应用后台的-应用设置-基础设置，应用专属存储进行选择开启。开启后该应用的历史数据及未来新增数据，将会存储平台管理中的专属数据库(PostgresSQL)及专属附件 OSS中![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1656640894254-28a9d1f4-76f4-4cc4-aa58-ebd020cce725.png)
### 3、平台级 全局配置：[​](#Otajr)
平台管理员可通过应用全局配置，批量对新建应用进行存储策略配置，管理企业默认应用行为简化应用的批量高级配置能力，确保所有新建应用都遵循组织架构策略指导，批量设置应用默认配置项。允许管理员定义一系列的基础运维配置，这些设定将会作为默认值应用于在平台新建的每个应用。![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1703747684603-8bec8034-0fa7-4caf-b603-117aa2964f2a.png)
## 数据库的表清单：[​](#nn8HU)
下面列举了主要核心数据库table表，更详细表字段的介绍，售后客户可联系客户经理获取进一步明细说明。`odin_open_application_data`：表单实例（表单与报表共用）数据表。`tianshu_form_data_operation_log`：表单数据操作记录表。`tianshu_proc_inst_carbon`：流程实例抄送人表。`tianshu_data_form_version`：实例数据的表单版本关联表。`tianshu_form_data_stash`：表单缓存表。`tianshu_form_remark`：评论功能。`tianshu_instance_relation`：表单实例关系表 ，宜搭专属老存储使用，已经废弃。`yida_entity_instance`：表单实例数据表，宜搭专属老存储使用，已经废弃。`tianshu_form_data`：表单数据表，宜搭专属老存储使用，已经废弃。`ecds_xxxx`：宜搭系统内部表，`ecds`开头的表都是系统运行内部表，请勿执行任何操作。`yida_app_data_xxx`：物理列表，表结构同`odin_open_application_data`，只是json字段打平，一个表单一张表，子表也是独立表。
### 专属存储-环境要求清单表[​](#XxQ93)
检查类型功能项**配置内容****说明**数据库1、数据库位置推荐使用阿里云的PostgreSQL（RDS、ADB版本均可）推荐阿里云云数据库，运维有保障、网络、性能稳定有保障2、数据库版本PostgreSQL 14及以上版本不满足14版本的无法提供最优性能保障3、数据库规格8C 16G SSD 200G 及以上规格可支持单表100万数据4、数据库地址需要提供域名的非IP式地址使用域名可以方便扩缩容，提高配置的灵活性和服务可用性5、数据库连接测试通过宜搭专属配置中的测试连接功能验证网络连通性。开放公网可访问，配置网络出口IP白名单如果不想开放公网需要额外购买并对接专属钉钉安全网关用于检验网络是否连通，数据源能否进行初始化6、数据库连接池可用连接最小1000宜搭是集群部署模式，为保障每台机器的连接数量，需要服务端加大可用连接数7、连接保活配置tcp_keepalives_idle=30tcp_keepalives_interval=5提高数据库连接保活频率，避免因网络原因出现无效连接8、数据库监控便于dba或devOps的问题排查方便日常排查问题，缺失时性能问题将不能快速定位9、数据库带宽推荐宜搭独享最低10M如果业务访问量非常大，上传下载频繁，需要考虑适当提高带宽OSS对象存储1、OSS类型来自阿里云的OSS宜搭文件的存储只支持阿里云OSS2、配置网络IP白名单在OSS的安全策略中配置宜搭网络出口IP白名单对于VPC环境中需要设置允许宜搭的网络可访问3、网络配置OSS开通公网可访问4、连通性测试通过宜搭专属配置中的测试连接功能验证网络连通性用于检验网络是否连通5、跨域设置需要配置允许企业在宜搭上的域名可跨域，Header设置为 *宜搭是直连OSS进行文件上传下载，必须允许跨域才能使用6、防盗链检查检查是否开启了防盗链，如果开启需要配置宜搭域名白名单防盗链会禁止非白名单内的请求7、时间服务器检查如果企业有时间服务器，需要检查时间是否准确OSS请求有时效性，宜搭设置为30s，超期请求将无效
## 常见问题：[​](#Fnr8r)
### Q: 历史应用开启专属储存后，历史数据会同步吗？有什么要注意的？[​](#WVWVM)
历史数据会同步，同步时间根据当前应用的数据量和数据库的规格不同而有所不同，数据量越大时间越长，待开启按钮的 loading 结束后，说明同步完成。数据同步过程中，数据库会限制写入，所以开启过程中需要禁止当前应用访问、提交数据，避免出错或产生脏数据。
### Q: 配置了企业自主的OSS文件对象存储后，附件上传量是否还有数量上限控制？[​](#JYKld)
开启了专属存储的应用产生的附件上传量，将直存于企业专属存储(存储在云上应用使用的附件量总量依然有上限，但上传于专属OSS的将不会平台侧的上限统计)。既保证了企业数据安全，而使用了专属存储的应用附件总量上限将受限于企业oss本身的上限。
### Q：开启专属存储，数据存储在企业自己的阿里云数据库或OSS上，这部分数据，宜搭平台上会有备份吗？[​](#LX7AF)
不会，业务数据直存企业数据库或OSS空间，宜搭侧不会做存储及备份，需要客户做好数据的安全保存。
### Q：视图表是否有单独的数据表来进行存储？[​](#IQb8Q)
视图表没有单独存储，是基于实体表，每次使用时 实施通过对应的数据底表，计算出来的结果，不涉及持久化存储。（注：数据准备涉及分布式数据加工，目前仍会将中间表及加工后的存储，保存在云上环境）
### Q: 历史应用开启专属储存后，历史数据会同步吗？有什么要注意的？[​](#kLCFG)
历史数据会同步，同步时间根据当前应用的数据量和数据库的规格不同而有所不同，数据量越大时间越长，待开启按钮的 loading 结束后，说明同步完成。数据同步过程中，数据库会限制写入，所以开启过程中需要禁止当前应用访问、提交数据，避免出错或产生脏数据。
### Q: 专属宜搭的产品费用中，是否包含存储介质的使用及运维费用？[​](#oMBbP)
专属宜搭的产品费用中，仅包含宜搭产品本身的功能服务使用，**不包含**存储介质的**使用及运维**费用，平台本身只需要配置一个**有效的、可靠的，公有云可访问**的**专属存储资源服务**；同时，专属宜搭的产品服务里，**也不承担**专属存储所需的**数据库、OSS的业务交付实施**，后期的**DevOps稳定性运维**、**防火墙网络运维**、以及**专属存储本身的相关费用**。请在业务实施前，充分评估对于自行提供**专属存储的运维可靠性**，**推荐由企业专业人员维护**，避免因企业自有的存储介质本身或环境链路异常，从而影响了业务有效执行。
### Q: 可以直接修改数据库中的DB数据吗？[​](#UbPug)
专属存储功能主要为满足数据安全和大数据量BI分析的诉求，当您使用专属存储数据库时，建议您可对本地数据进行必要的查询操作，但由于平台功能具有高度耦合性，涉及多表及系统缓存间的数据同步问题，**平台强烈建议您勿通过直接操作数据库的方式操作数据**如需数据变更可通过平台提供的官方操作（手动编辑、openAPI、集成自动化、导入、批量修改等）等方式进行数据操作。
### Q：哪些功能在开启了专属存储会有差异注意事项？[​](#QI70C)
**专属数据库**开启前开启后**视图表**云端存储依然是非本地存储存储（视图表没有单独存储，是基于实体表，每次使用时 实施通过对应的数据底表，计算出来的结果，不涉及持久化存储。**数据准备**云端存储依然是非本地存储存储（数据准备涉及分布式数据加工，目前仍会将中间表及加工后的存储，保存在云上环境）**大数据导入、自动化性能上限提升**专属宜搭三大场景性能提升：**表单数据导入（**提升10倍，至5万条数据**）****流程数据导入（**提升10倍，至1万条数据**）****集成自动化、业务规则 （**提升20倍，至2千条数据**）**开启专属存储后，暂不具备在高性能能力![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1728697796201-90d4c64e-43cc-4e5f-9896-cd1f94d678fd.png)
**基础统计能力**企业基础信息提供统一业务实例量统计管理专属存储相关的应用，由企业自行在专属数据库中运维查看。![](https://yida-support.oss-cn-shanghai.aliyuncs.com/static/png/1728697521842-b9cbb901-d304-4b0e-b6dd-322fee18551e.png)
**国产信创能力**阿里云自研数据库如若需要信创资质数据库，可进行商业具体评估条件；**酷应用工厂应用**云端存储不支持开启专属存储
### Q：应用开启专属数据库后，是否可以在专属数据库内查到待审批的任务？[​](#AUHKU)
专属数据库仅保存已生成的审批数据，不包括待审批的任务。如需查看待审批任务，请访问表单的**数据管理**页。
### Q：专属版宜搭版本到期后，是否会对历史数据产生影响？[​](#VdyWq)
例如：之前本地数据库内的数据是否还会正常存在，且后续编辑历史数据后，数据库内的数据是否会同步修改。**A：**不会对历史数据产生影响，但平台无任何专属存储编辑配置能力，应用的专属存储状态无法切换和运维保障。
